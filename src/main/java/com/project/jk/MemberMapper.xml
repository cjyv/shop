<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.common.MemberMapper">


<select id="loginCheck" parameterType="com.project.common.Member" resultType="com.project.common.Member">
select * from member where m_id = #{m_id}
</select>

<select id="checkId_select" parameterType="com.project.common.Member" resultType="com.project.common.Member">
select * from member where m_id = #{m_id}
</select>

<select id="compareKey" parameterType="com.project.common.MemberPhoneKey" resultType="com.project.common.MemberPhoneKey">
select m_p_id from member_phone_check where m_p_number = #{m_p_number}
</select>

<select id="checkSuccessInfo" parameterType="com.project.common.MemberPhoneKey" resultType="com.project.common.MemberPhoneKey">
select m_p_successInfo from member_phone_check where m_p_number = #{m_p_number}
</select>


<insert id="insertPhoneKey" parameterType="com.project.common.MemberPhoneKey">
insert into member_phone_check values(member_phone_seq.nextval, #{m_p_number}, #{m_p_id}, #{m_p_successInfo})
</insert>

<insert id="insertKey" parameterType="com.project.common.TempMemberInfo">
insert into temp_member values(#{t_m_id}, #{t_m_email}, #{t_m_key})
</insert>

<insert id="regMember" parameterType="com.project.common.Member">
insert into member values(#{m_id}, #{m_pw}, #{m_name}, #{m_addr}, #{m_phone}, #{m_email}, #{m_grade}, #{m_photo})
</insert>

<insert id="insertTempInfo" parameterType="com.project.common.Member">
insert into temp_member values(#{t_m_id}, #{t_m_email}, #{t_m_key})
</insert>

<update id="updateSuccessInfo" parameterType="com.project.common.MemberPhoneKey">
update member_phone_check set m_p_successInfo = #{m_p_successInfo} where m_p_number = #{m_p_number}
</update>

<update id="updateTempMemberInfo" parameterType="com.project.common.TempMemberInfo">
update temp_member set t_m_key = 'y' where t_m_id = #{t_m_id}
</update>


</mapper>